<!doctype html public "-//W3C//DTD HTML 4.01 Transitional//EN"
                      "http://www.w3.org/TR/html4/loose.dtd">

<html>
<head>
<title>Java[tm] 2 Platform, Enterprise Edition Blueprints &gt;
Blueprints Mailer</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>

<table width="100%" cellpadding="5" cellspacing="0" border="0">
<tr>
<td width="100%" bgcolor="#000033">
<font color="#FFFFFF"><a href="../index.html"><b><font
color="#9999FF">J2EE[tm] Blueprints</font></b></a> &gt; <b>Blueprints
Mailer</b></font>
</td>
</tr>
</table>

<h1>Blueprints Mailer</h1>

<p>Welcome to the Blueprints Mailer, a sample application brought to
you by the <a href="../index.html">Java 2 Platform, Enterprise Edition
Blueprints (J2EE<sup><font size="-2">TM</font></sup> Blueprints)</a>
program!</p>

<p>The Blueprints Mailer mini-application introduces you to some of
the J2EE Blueprints design guidelines in a smaller, simpler
package.</p>

<p>This document outlines the steps needed to use the
mini-application.</p>

<center>
<table width="90%">
<tr>
<td>
<hr noshade="noshade" size="1" /> <b>Note:</b> These instructions use
<code>$JPS_HOME</code> (UNIX) and <code>%JPS_HOME%</code> (Win32) to
denote the root directory of the J2EE Blueprints bundle. <hr
noshade="noshade" size="1" />
</td>
</tr>
</table>
</center>

<h2>Before you begin</h2>

<p>Before you begin, you must have the following items installed on
your system:</p>

<ul>
<li><p><b>Java 2 Platform, Standard Edition SDK (J2SE<sup><font
size="-2">TM</font></sup> SDK)</b>: <a
href="http://java.sun.com/j2se/1.3/">v1.3 download (preferred)</a> |
<a href="http://java.sun.com/products/jdk/1.2/">v. 1.2.2
download</a></p></li>

<li><p><b>Java 2 Platform, Enterprise Edition SDK (J2EE<sup><font
size="-2">TM</font></sup> SDK)</b>: <a
href="http://java.sun.com/j2ee/download.html">v1.2.1
download</a></p></li>
</ul>

<p>Also make sure to set the environment variables
<code>JAVA_HOME</code> and <code>J2EE_HOME</code> as follows:</p>

<ul>
<li><p><code>JAVA_HOME</code> must point to the root directory of your
J2SE SDK installation. For example, if you installed the J2SE SDK in
<code>/usr/local/java/jdk1.3</code>, then that path should be the
value of <code>JAVA_HOME</code>.</p></li>

<li><p><code>J2EE_HOME</code> must point to the root directory of your
J2EE SDK installation. For example, if you installed the J2EE SDK in
<code>c:\j2sdkee1.2.1</code>, then that path should be the value of
<code>J2EE_HOME</code>.</p></li>
</ul>

<h2>Deploying the mailer</h2>

<p>These instructions describe how to deploy the mailer on the J2EE
Reference Implementation server (which comes with the J2EE SDK).</p>

<center>
<table width="90%">
<tr>
<td>
<hr noshade="noshade" size="1" /> <b>Note:</b> These instructions use
<code>$JPS_HOME</code> (UNIX) and <code>%JPS_HOME%</code> (Win32) to
denote the root directory of the J2EE Blueprints bundle. <hr
noshade="noshade" size="1" />
</td>
</tr>
</table>
</center>

<ol>
<li><p><b>Start the J2EE Reference Implementation server.</b></p>

<p>Bring up another command or shell prompt. Change the current
directory to <code>$J2EE_HOME/bin</code> (UNIX) or
<code>%J2EE_HOME%\bin</code> (Win32) and enter the following
command:</p>

<p><code>j2ee -verbose</code></p>
</li>

<li><p><b>Start the J2EE Reference Implementation deployment
tool.</b></p>

<p>Bring up another command or shell prompt. Change the current
directory to <code>$J2EE_HOME/bin</code> (UNIX) or
<code>%J2EE_HOME%\bin</code> (Win32) and enter the following
command:</p>

<p><code>deploytool</code></p>
</li>

<li><p><b>Open the application.</b></p>

<p>From the <i>File</i> menu, select <i>Open Application...</i>. In
the subsequent file dialog, open <code>mailerapp.ear</code>, which can
be found in <code>$JPS_HOME</code> (UNIX) or <code>%JPS_HOME%</code>
(Win32).</p>
</li>

<li><p><b>Configure the e-mail settings.</b></p>

<p>Go to the <i>Local Applications</i> tree, and select <i>mail</i>
&gt; <i>Mail Component</i> &gt; <i>TheMailer</i>.</p>

<p>In the inspector, select the <i>Resource Ref's</i> tabbed
pane. Select the <code>mail/MailSession</code> entry, which will
enable the <i>Deployment Settings</i> box below.</p>

<p>Change the value of the <i>Host</i> field to the name of your local
SMTP server. Change the value of the <i>User Name</i> field to the
name you use to access that server.</p>

<p>Select <i>Save</i> from the <i>File</i> menu.</p>
</li>

<li><p><b>Deploy the application.</b></p>

<p>From the <i>Tools</i> menu, select <i>Deploy Application</i>.
Click through the subsequent dialogs to complete the deployment. You
shouldn't have to change any of the default values.</p>
</li>
</ol>

<h2>Using the mailer</h2>

<p>Now that the mailer is deployed you can access it through a Web
browser.</p>

<p>To access the mailer, click the link at the end of this section to
bring up the welcome page. Click the link on that page to bring up the
e-mail form. The fields on this form are:</p>

<ul>
<li><p>The e-mail address to which you want to send your message. Of
course, this should be <i>your</i> e-mail address if you want to test
the mini-application.</p></li>

<li><p>The subject of your message.</p></li>

<li><p>The contents of your message.</p></li>
</ul>

<p>Click the <i>Submit</i> button to send the message.</p>

<p>Now, check the account for the e-mail address you used in the
previous step. If the mailer has been configured correctly, you'll
receive a new message, the subject and contents of which you entered
in the previous step. Also note that the message's <i>From:</i> header
field contains the value of the <code>mail-from</code> entry from the
deployment descriptor in <code>ejbruntime.xml</code> (which you edited
before you deployed the mini-application).</p>

<p>To start the mini-application click the following link:</p>

<p><code><a href="http://localhost:8000/mailerapp/">
http://localhost:8000/mailerapp/</a></code></p>

<center>
<table width="90%">
<tr>
<td>
<hr noshade="noshade" size="1" /> <b>Note:</b> These instructions
assume that the application is deployed on a machine named
<code>localhost</code> and port <code>8000</code>. You should
substitute <code>localhost</code> and <code>8000</code> with the name
of the machine and the port on which the application is deployed.<hr
noshade="noshade" size="1" />
</td>
</tr>
</table>
</center>

</li>
</ol>

<h2>Building the mailer</h2>

<p>We use <a href="http://jakarta.apache.org/ant/index.html">Ant</a>
to build the source code. Ant is a Java-based build tool like
<i>make</i>, which has been developed under the auspices of the <a
href="http://www.apache.org/">Apache Software Foundation</a>. A
working version of Ant is provided as part of the J2EE Blueprints
bundle.<p>

<p>If you ever make changes to the mailer's source code, you need to
build the application and deploy the rebuilt application for your
changes to take effect.</p>

<p>To build the mailer, bring up a shell or command prompt. Then:</p>

<ul>
<li><p><b>UNIX</b>: Change the current directory
<code>$JPS_HOME/src/miniapps/mailerapp/src/</code> and run
<code>build.sh</code>. If the compilation succeeds,
<code>mailerapp.ear</code> will be created in the directory
<code>$JPS_HOME/src/miniapps/mailerapp/build/</code>.</p></li>

<li><p><b>Win32</b>: Change the current directory
<code>%JPS_HOME%\src\miniapps\mailerapp\src\</code> and run
<code>build.bat</code>. If the compilation succeeds,
<code>mailerapp.ear</code> will be created in the directory
<code>%JPS_HOME%\src\miniapps\mailerapp\build\</code>.</p></li>
</ul>

<p>When deploying the built application, use the file
<code>mailerapp.ear</code> created by the build (as opposed to
pre-built one located in the root directory of the J2EE Blueprints
bundle).</p>

<hr noshade="noshade" />

<font size="-1"><i><a href="../copyright.html">Copyright &copy; 2001 Sun
Microsystems, Inc. All Rights Reserved.</a></i></font>

</body>
</html>
