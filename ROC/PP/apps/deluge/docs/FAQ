----------------------------------------------------

(ANSWERS TO) FREQUENTLY ASKED QUESTIONS ABOUT DELUGE

	Last modified 2001-04-11

----------------------------------------------------

Q: How do I parameterize client requests? I want to have 10 users,
each one logging in as user0, user1, ... etc, to user9.

A: You can do this with the magic of the request_vars parameter. 
For example, let's say that you have a test definition with this 
user_def section:

    user_def = test
    	attack_type = playback
    	script_dir = scripts/
        script_file = _test_
    	instances = 10
    	# replace the left-hand-side with the right-hand-side
    	request_vars
    		_USERID_ = __ID
    	END
    END

When deluge runs, it will scan your playback script for "external
headers" and "external content". If there are any present, they'll
look like this:
	My-Special-Header: foo
	DLG-Request-Content: user=test_USERID_

There's nothing to replace in the header above, but the request
content will be rewritten by replacing USERID with the "instance
number" of the current request. Since we have 10 instances of
this user, the numbers will be 0 through 9.
	user=test0
	user=test1
	(...)
	user=test9

The request_vars magic will also act on any query strings in your
URLs. So
	top_url = http://www.foo.com/bar?user=test_USERID_
would also be transformed.

Be careful with this: if you choose your request_vars poorly, bad
things will happen. For example, if you were silly enough to say
	request_vars
		e = __ID
	END
you'd obviously see very weird results. Choose something that is
unlikely to occur outside your target for text replacement.

----------------------------------------------------

Q: Cool! What other values can I substitute?

A: The following system variables are defined:

	__HOST the hostname of the client machine.
    __PID the process id number of the master deluge process.
    __ID an integer number representing the instance id.
    __ITER the number of iterations made by this client instance.

----------------------------------------------------

Q: What is the process model for Deluge?

A: By default, Deluge creates one child process per user definition.
If you want more processes per user definition, add a
	processes = <nnn>
line to your user definition. Note that
	total instances = instances x processes
so if you have 4 processes and 100 instances, you'll have 500 instances
total. Also, __ID increments across processes. So your __ID values
will run from 0 to 499.

----------------------------------------------------

Q: How can I limit the client load generated by Deluge?

A: By default, Deluge does not attempt to limit client load at all.
You can simulate "think time" with the delay_time and delay_spread
parameters in each user definition. Or, to more sharply define the
exact level of load to generate, use "max_rate" to specify the
maximum operations per second (per-process) for a user definition.
Each Deluge process will throttle itself to the max_rate.

----------------------------------------------------

# end FAQ
